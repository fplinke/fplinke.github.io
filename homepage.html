<!DOCTYPE html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> 
   #tooltip {
   opacity: 0;
   position: absolute;
   text-align: center;
   width: 60px; height: 80px;
   background: white;
   border: 1px solid;
   }
</style>
<style type="text/css">
.line_HR {
    fill: None;
    stroke: rgb(211,84,0);
    stroke-width: 3;
}
.line_BA {
    fill: None;
    stroke: rgb(175,122,197);
    stroke-width: 3;
}
.line_SLG {
    fill: None;
    stroke: rgb(35,155,86);
    stroke-width: 3;
}   

</style>
<html>
   <body onload='main()' style="text-align:center; background-color:rgb(230,230,230);">
      <h1 style="font-family:Merriweather; font-size:45px;">Major League Baseball (MLB) Statistics from the Last Decade</h1>
      <p style="font-family:Merriweather; font-size:20px; "> WELCOME! This website can be used to explore offensive statistics in the MLB from the last decade. First, data is explored at a high level and examined for year over year trends...</p>
      <p style="font-family:Merriweather; font-style:italic; font-size:20px;"> Hover over colors in graphs below to see years and statistics!</p>
      <p style="color:rgb(211,84,0); font-size:35px;">Average MLB Home Runs per Team (2010 - 2019)</p>
      <svg class="HRchart" width = 1000 height = 600 style="border:solid; background-color:white; stroke-width:5" ></svg>
      <p style="color:rgb(175,122,197); font-size:35px;">Average MLB Team Batting Average (2010 - 2019)</p>
      <svg class="BAchart" width = 1000 height = 600 style="border:solid; background-color:white; stroke-width:5" viewBox="0 0 1000 600"></svg>
      <p style="color:rgb(35,155,86); font-size:35px;">Average MLB Team Slugging Percentage (2010 - 2019)</p>
      <svg class="SLGchart" width = 1000 height = 600 style="border:solid; background-color:white; stroke-width:5" viewBox="0 0 1000 600"></svg>
      <p style="font-size:25px;">After exploring this data, please click to see team statistics is greater detail: 
         <button onclick="location.href='https://fplinke.github.io/wins.html';" style="font-size:18px;">Detailed Statistics!</button>
      </p>
      <div id="tooltip"></div>
            <p>  
         Click to view different years!
         <button onclick="triggerTransitionHR()">Home Runs</button>
         <button onclick="triggerTransitionBA()">Batting Average</button>
         <button onclick="triggerTransitionSLG()">Slugging Percentage</button>
      </p>

   </body>
   <script>
      
      var margin = {top: 50, right: 50, bottom: 50, left: 50}
      var width = 1000 - margin.left - margin.right;
      var height = 600 - margin.top - margin.bottom; 
      var x_HR = d3.scaleLinear().domain([2010,2019]).range([margin.left,width+margin.right]);
      var y_HR = d3.scaleLinear().domain([125,250]).range([height+margin.bottom,margin.top]);
      var x_BA = d3.scaleLinear().domain([2010,2019]).range([margin.left,width+margin.right]);
      var y_BA = d3.scaleLinear().domain([.24,.26]).range([height+margin.bottom,margin.top]);
      var x_SLG = d3.scaleLinear().domain([2010,2019]).range([margin.left,width+margin.right]);
      var y_SLG = d3.scaleLinear().domain([.35,.45]).range([height+margin.bottom,margin.top]);
      var tooltip = d3.select("#tooltip");
      
       var line_HR = d3.line()
         .x(function(d, i) { return x_HR(d.Year); }) 
         .y(function(d) { return y_HR(d.HR); })
       var line_BA = d3.line()
         .x(function(d, i) { return x_BA(d.Year); }) 
         .y(function(d) { return y_BA(d.BA); })
       var line_SLG = d3.line()
         .x(function(d, i) { return x_SLG(d.Year); }) 
         .y(function(d) { return y_SLG(d.SLG); }) 
      
      async function main() {
       const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-compiled-6.csv');
       var data_compiled = [];
       for (var i = 0; i < 10; i++) {
             data_compiled.push(mlb_data[i])  
        }
        
     
        d3.select(".HRchart").append("g")
         .attr("transform", "translate(0,550)")
         .call(d3.axisBottom(x_HR));
        d3.select(".HRchart").append("g")
          .attr("transform", "translate(50,0)")
          .call(d3.axisLeft(y_HR)); 
         d3.select(".HRchart").append("path")
          .datum(data_compiled) 
          .attr("class", "line_HR") 
          .attr("d", line_HR);  
         
         d3.select(".BAchart").append("g")
         .attr("transform", "translate(0,550)")
         .call(d3.axisBottom(x_BA));
        d3.select(".BAchart").append("g")
          .attr("transform", "translate(50,0)")
          .call(d3.axisLeft(y_BA)); 
         d3.select(".BAchart").append("path")
          .datum(data_compiled) 
          .attr("class", "line_BA") 
          .attr("d", line_BA);  
       
         d3.select(".SLGchart").append("g")
         .attr("transform", "translate(0,550)")
         .call(d3.axisBottom(x_SLG));
        d3.select(".SLGchart").append("g")
          .attr("transform", "translate(50,0)")
          .call(d3.axisLeft(y_SLG)); 
         d3.select(".SLGchart").append("path")
          .datum(data_compiled) 
          .attr("class", "line_SLG") 
          .attr("d", line_SLG);  
      }
      async function triggerTransitionBA() {
       const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-compiled-6.csv');
       var data_compiled = [];
       for (var i = 0; i < 10; i++) {
             data_compiled.push(mlb_data[i])  
        }
        d3.select(".HRchart").html="";
         
        d3.select(".HRchart").append("g")
         .attr("transform", "translate(0,550)")
         .call(d3.axisBottom(x_BA));
        d3.select(".HRchart").append("g")
          .attr("transform", "translate(50,0)")
          .call(d3.axisLeft(y_BA)); 
         d3.select(".HRchart").append("path")
          .datum(data_compiled) 
          .attr("class", "line_BA") 
          .attr("d", line_BA);  }
        
   </script>  
</html>
