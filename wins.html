<!DOCTYPE html>
<script src='https://d3js.org/d3.v5.min.js'></script>

<style> 
#tooltip {
  opacity: 0;
  position: absolute;
  text-align: center;
  width: 60px; height: 80px;
  background: white;
  border: 0px;
  }
</style>

<html>
<body onload='main()'>
  <h1>Wins per MLB team</h1>   
  <p>Hover over each color to see the team and number of games won!</p>
<svg class="chart" width = 1200 height = 600 style="border:solid;" viewBox="0 0 1200 600"></svg>
<div id="tooltip"></div>
<p>
Click to View other Years!
<a href="https://fplinke.github.io/2012.html">2012</a>
<button onclick="location.href='https://fplinke.github.io/2013.html';">See 2013 Data!</button> 
<button onclick="location.href='https://fplinke.github.io/2015.html';">See 2015 Data!</button>   
</p> 
  
<p>  
Click to view different team stats!
<button onclick="triggerTransition2010()">2010</button>
<button onclick="triggerTransition2011()">2011</button>
<button onclick="triggerTransition2012()">2012</button>
<button onclick="triggerTransition2013()">2013</button>
<button onclick="triggerTransition2014()">2014</button>
<button onclick="triggerTransition2015()">2015</button>
<button onclick="triggerTransition2016()">2016</button>
<button onclick="triggerTransition2017()">2017</button>
<button onclick="triggerTransition2018()">2018</button>
<button onclick="triggerTransition2019()">2019</button>
</p>
</body> 
  
<script>
var width = 1200, height = 600;
var x = d3.scaleLinear().domain([0,30]).range([0,width])
var y = d3.scaleLinear().domain([0,1]).range([height,0])
var tooltip = d3.select("#tooltip");
var crange = ["rgb(227,212,173)", "rgb(19,39,79)", "rgb(223,70,1)", "rgb(189,48,57)", "rgb(14,51,134)", "rgb(196,206,212)", "rgb(198,1,31)", "rgb(12,35,64)", "rgb(51,0,111)", "rgb(250,70,22)", "rgb(244,145,30)", "rgb(0,70,135)", "rgb(134,38,51)", "rgb(0,90,156)", "rgb(0,163,224)", "rgb(255,197,47)", "rgb(0,43,92)", "rgb(0,45,114)", "rgb(196,206,211)", "rgb(0,56,49)", "rgb(232,24,40)", "rgb(39,37,31)", "rgb(47,36,29)", "rgb(0,92,92)", "rgb(239,209,159)", "rgb(196,30,58)", "rgb(143,188,230)", "rgb(0,50,120)", "rgb(19,74,142)", "rgb(171,0,3)"];
var cdomain = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29];  

var x_WL = d3.scaleLinear().domain([0,30]).range([0,width])
var y_WL = d3.scaleLinear().domain([0,110]).range([height,0]) 
var x_HR = d3.scaleLinear().domain([0,30]).range([0,width])
var y_HR = d3.scaleLinear().domain([0,250]).range([height,0]) 
var x_BA = d3.scaleLinear().domain([0,30]).range([0,width])
var y_BA = d3.scaleLinear().domain([.2,.3]).range([height,0])
var x_OBP = d3.scaleLinear().domain([0,30]).range([0,width])
var y_OBP = d3.scaleLinear().domain([.2,.4]).range([height,0])
var x_SLG = d3.scaleLinear().domain([0,30]).range([0,width])
var y_SLG = d3.scaleLinear().domain([.2,.5]).range([height,0])
var x_OPS = d3.scaleLinear().domain([0,30]).range([0,width])
var y_OPS = d3.scaleLinear().domain([.2,.9]).range([height,0])
  
  
async function main() {
 const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
 var data_2014 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2014) {
       data_2014.push(mlb_data[i])  
    }
  }

d3.select(".chart")
  .selectAll("rect")
  .data(data_2014)
  .enter()
  .append("rect")
  .attr("width",40)
  .attr("height",function(d,i) { return height - y(i/29); })
  .attr("x",function(d,i) { return x(i); })
  .attr("y",function(d,i) {return y(i/29); })
  .style("fill",function(d,i) {return crange[i];})
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2014[i].Tm+"Choose Year!");
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
  .transition()
    .delay(100)
    .duration(2000)
  .attr("height",function(d,i) { return y(i/29); })
  .attr("y",function(d,i) {return height - y(i/29); })
  .transition()
    .delay(100)
    .duration(2000)
  .attr("height",height - y(.5))
  .attr("y",y(.5));
}
  
async  function triggerTransition2010(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2010 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2010) {
       data_2010.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2010)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2010[i].Tm+" Games Won: "+data_2010[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2010[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2010[i].Wtm); });
}  
async  function triggerTransition2011(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2011 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2011) {
       data_2011.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2011)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2011[i].Tm+" Games Won: "+data_2011[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2011[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2011[i].Wtm); });
}    
async  function triggerTransition2012(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2012 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2012) {
       data_2012.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2012)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2012[i].Tm+" Games Won: "+data_2012[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2012[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2012[i].Wtm); });
}  
async  function triggerTransition2013(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2013 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2013) {
       data_2013.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2013)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2013[i].Tm+" Games Won: "+data_2013[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2013[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2013[i].Wtm); });
}    
async  function triggerTransition2014(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2014 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2014) {
       data_2014.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2014)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2014[i].Tm+" Games Won: "+data_2014[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2014[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2014[i].Wtm); });
}    
async  function triggerTransition2015(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2015 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2015) {
       data_2015.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2015)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2015[i].Tm+" Games Won: "+data_2015[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2015[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2015[i].Wtm); });
}   
async  function triggerTransition2016(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2016 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2016) {
       data_2016.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2016)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2016[i].Tm+" Games Won: "+data_2016[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2016[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2016[i].Wtm); });
}    
async  function triggerTransition2017(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2017 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2017) {
       data_2017.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2017)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2017[i].Tm+" Games Won: "+data_2017[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2017[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2017[i].Wtm); });
}   
async  function triggerTransition2018(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2018 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2018) {
       data_2018.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2018)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2018[i].Tm+" Games Won: "+data_2018[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2018[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2018[i].Wtm); });
}   
async  function triggerTransition2019(){
  const mlb_data = await d3.csv('https://fplinke.github.io/mlb-stats-2010to2019-final.csv');
  var data_2019 = [];
 for (var i = 0; i < mlb_data.length; i++) {
    if (mlb_data[i].Year == 2019) {
       data_2019.push(mlb_data[i])  
    }
  }
  d3.select(".chart")
  .selectAll("rect")
  .data(data_2019)
  .on("mouseover",function(d,i) {
    tooltip.style("opacity", 1)
    .style("left",(d3.event.pageX)+"px")
    .style("top",(d3.event.pageY)+"px")
    .html("Team: "+data_2019[i].Tm+" Games Won: "+data_2019[i].Wtm);
  })
  .on("mouseout",function() { tooltip.style("opacity", 0) })
    .transition()
    .delay(100)
    .duration(2000)
    .attr("height",function(d,i) { return height - y_WL(data_2019[i].Wtm); })
  .attr("y",function(d,i) {return y_WL(data_2019[i].Wtm); });
}    
  


</script>  
</html>
